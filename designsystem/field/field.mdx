import { ArgTypes, Meta, Canvas } from '@storybook/addon-docs/blocks';
import { CssVariables, JumpTo } from '../../.storybook/blocks';
import * as stories from './field.stories';
import { Details } from '../react';

<Meta of={stories} />

# Field

<JumpTo />

## Generelt
- Legg klassen `field` på typisk en `<div>` rundt ledetekst og skjemafelt
- Dette kobler automatisk sammen `<label>` og `<input>`, samt eventuelle element med `<p>` og klassen `validation`

<Details>
  <Details.Summary>Se egne parameter for React</Details.Summary>
<div>
I React kan du velge å bruke `<Field>` med `<label>`, `<Input>` osv. for full kontroll, eller med `as="input"`/`as="select"` og props for automatisk oppsett av elementer:
<ArgTypes of={stories} />
</div>
</Details>

<Canvas of={stories.Default} />

## Obligatorisk felt
- Legg `required` eller `aria-required` på skjemaelementet
- Da får du automatisk teksten `Må fylles ut` i `<label>`
- Teksten `Må fylles ut` oversettes automatisk til `Required` dersom du setter `<html lang="en">`. Du kan også selv endre tekst med CSS custom property: `--mtds-text-required: "Må fylles ut";`
- **Merk:** Dersom du ønsker å skru denne [lovpålagte merkingen av obligatoriske felter](https://www.designsystemet.no/monstre/obligatoriske-og-valgfrie-felt), kan du legge `data-required="hidden"` på hvilket som helst element (f.eks. `<html data-required="hidden">` for å skru av for hele dokumentet)
<Canvas of={stories.Required} />

## Radio / Check / Switch
- Ved bruk av `<input type="checkbox | radio"` vil `<label>`, `<p>` og `class="styles.validation"` legge seg etter input
<Canvas of={stories.Toggles} />

## Delvis valgt checkbox
- Bruk `indeterminate` ([via javascript](https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/indeterminate)) på `<input type="checkbox">` for delvis valgt checkbox
<Canvas of={stories.Indeterminate} />

## Feilmelding
- Legg klassen `validation` på et element for å tilknytte feilmelding
<Canvas of={stories.WithValidation} />

## Innebygget skjemavalidering (eksperimentell)
- Nettleserens valideringsmeldinger skjules pga. begrenset styling og universell utforming
- Du kan allikevel få [nettleserens innebygge skjemavalidering](https://developer.mozilla.org/en-US/docs/Learn_web_development/Extensions/Forms/Form_validation#using_built-in_form_validation) til å automatisk skjule og vise [validation-komponentet](?path=/docs/designsystem-validation--docs) ved å legge `data-validation="form"` på `field` 
<Canvas of={stories.WithValidationForm} />

## Prefiks og suffiks
- Legg klassen `affixes` på en `<div>` rundt `input`
- Legg elementer før eller etter `input` for å legge til ikon eller tekst
- **Merk:** for god tilgjengelighet, beskriv ønsket innhold i `<p>` eller `<label>`, f.eks.: "Pris i NOK per måned"
<Canvas of={stories.WithAffixes} />

## Beskrivelse siktekst
- Ved bruk av CMS kan vi ikke være sikker på at beskrivelse tegnes med én `<p>`
- Bruk da heller `<div>` med attributt `data-description` og klassen `prose`
<Canvas of={stories.WithCustomDescriptionTag} />

## Antall tegn
- Legg `data-count="number"` på `<p>` etter `input`
- Teksten oversettes automatisk til engelsk dersom du setter `<html lang="en">`. Du kan også selv endre tekst med CSS custom property, hvor `%d` er antall tegn. Eksempel:
  `--mtds-text-count-under: "%d characters remaining";`
  `--mtds-text-count-over: "%d characters too many";`
<Canvas of={stories.WithCharacterCount} />

## Med combobox
- Bruk `<u-combobox>` rundt `<input>` og `<datalist>` med `<option>`s for å lage forslag
- Legg en `<select hidden name="NAME-HERE">` i `<u-combobox>` for å få med verdien i skjemaet
- Legg en `<del hidden aria-label=""></del>` etter input for å få en tøm-knapp
- Bruk `data-nofilter` på `<u-datalist>` for å skru av filtrering
- **React?** Bruk `<Field.Combobox>`, `<Field.Datalist>` og `<Field.Option>` eller<br />`<Field as={Field.Combobox}>` ([se eksempel](?path=/story/designsystem-field--react-with-combobox))
<Details>
<Details.Summary>Hva er `u-combobox`?</Details.Summary>

[u-combobox](https://u-elements.github.io/u-elements/elements/u-combobox) er en del av prosjektet [u-elements](https://u-elements.github.io/u-elements)
som sikrer universell utforming. Dette lastes automatisk når du bruker `@mattilsynet/design`.
Du kan også hente inn tilhørende HTMLElement interface ved behov:
```
import { UComboboxElement } from '@mattilsynet/design'
```
</Details>

<Canvas of={stories.WithCombobox} />

<CssVariables component="field" />