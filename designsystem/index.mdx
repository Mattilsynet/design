import { Meta } from '@storybook/blocks';
import { getPkgVersion, JumpTo } from '../.storybook/blocks';
import { ArrowSquareOutIcon, PuzzlePieceIcon, ChatsCircleIcon, GitBranchIcon } from "@phosphor-icons/react";
import { Badge, Card, Details, Divider, Flex, Button, Tabs, Prose } from './react'
import { styles } from './';
import colors from './assets/colors.png';
import library from './assets/library.png';
import sizes from './assets/sizes.png';
import typography from './assets/typography.png';
import modes from './assets/modes.mp4?url';

<Meta title="Designsystem/Introduksjon" />

# <PuzzlePieceIcon /> Designsystem

> Mattilsynets designsystem bygger opp√• [designsystemet.no](https://www.designsystemet.no/), men utvider med egenart, visuelle identitet og interne behov. Designsystemet fungerer som et felles spr√•k mellom team og fagfelt, slik at vi lettere kan skape gode og gjenkjennbare brukeropplevelser for alle.

<Flex>
<Button href="https://mattilsynet-hq.slack.com/archives/C03FAJ7N1EU" data-variant="secondary"><ChatsCircleIcon /> Snakk med oss p√• Slack</Button>
<Button href="https://github.com/Mattilsynet/design/releases" data-variant="secondary"><GitBranchIcon /> Kode og versjonslogg (v{getPkgVersion()})</Button>
</Flex>

<JumpTo />

<Divider data-gap="10" />

## For utviklere

Designsystemet tilbyr f√∏rst og fremst en rekke CSS klassenavn som hjelper deg bygge responsive, fleksible og tilgjengelige grensesnitt. I tillegg f√•r du tilgang til logoer, ikoner, illustasjoner og en rekke tokens/[CSS custom properties](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties) for enkel bygging av egne komponenter i Mattilsynet-drakt. Slik bruker du pakken:

<Details>
<Details.Summary><Badge data-badge="1" />Installer `@mattilsynet/design`</Details.Summary>
<Tabs data-size="sm">
  <Tabs.List>
    <Tabs.Tab>NPM</Tabs.Tab>
    <Tabs.Tab>PNPM</Tabs.Tab>
    <Tabs.Tab>Yarn</Tabs.Tab>
    <Tabs.Tab>Bun</Tabs.Tab>
    <Tabs.Tab>Clojure</Tabs.Tab>
  </Tabs.List>
  <Tabs.Panel>
    ```bash
    npm install @mattilsynet/design --save
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```bash
    pnpm add @mattilsynet/design
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```bash
    yarn add @mattilsynet/design
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```bash
    bun add @mattilsynet/design
    ```
  </Tabs.Panel>
  <Tabs.Panel style={{ padding: 20 }}>
    <Button data-variant="primary" target="_blank" href="https://github.com/Mattilsynet/design/blob/next/clojure/README.md">Se egen README for Clojure <ArrowSquareOutIcon /></Button>
  </Tabs.Panel>
</Tabs>
</Details>
<Details>
<Details.Summary><Badge data-badge="2" />Importer JavaScript st√∏ttefunksjonalitet *eller* React komponenter</Details.Summary>
<Tabs data-size="sm">
<Tabs.List>
  <Tabs.Tab>JS</Tabs.Tab>
  <Tabs.Tab>HTML</Tabs.Tab>
  <Tabs.Tab>React</Tabs.Tab>
</Tabs.List>
<Tabs.Panel>
  ```js
  import "@mattilsynet/design";
  ```
</Tabs.Panel>
<Tabs.Panel>
  ```html
  <!-- Only use if you have no build step: -->
  <script src="node_modules/@mattilsynet/design/mtds/index.iife.js"></script>
  ```
</Tabs.Panel>
<Tabs.Panel>
  1. √ân fil i prosjektet m√• inneholde javscript-import og `"use client"` for at Next.js og kj√∏re n√∏dvendig Javascript i nettleser.
      Dette trenger ikke v√¶re samme fil som lager HTML - alt kan server-side-rendres.
      ```js
      "use client"
      import "@mattilsynet/design";
      ```
  2. Deretter kan du i andre filer benytte komponenter fra `@mattilsynet/design/react`:
      ```jsx
      import { Button } from "@mattilsynet/design/react";
      ```
</Tabs.Panel>
</Tabs>
</Details>
<Details>
<Details.Summary><Badge data-badge="3" />Importer stiler enten via JavaScript, CSS eller med TailwindCSS</Details.Summary>
<Tabs data-size="sm">
  <Tabs.List>
    <Tabs.Tab>JS</Tabs.Tab>
    <Tabs.Tab>CSS</Tabs.Tab>
    <Tabs.Tab>TailwindCSS v4</Tabs.Tab>
    <Tabs.Tab>TailwindCSS v3 and older</Tabs.Tab>
  </Tabs.List>
  <Tabs.Panel>
    ```js
    import "@mattilsynet/design/styles.css";
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```css
    @import url("@mattilsynet/design/styles.css");
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```css
    /* Load @mattilsynet/design before Tailwind: */
    @import '@mattilsynet/design/styles.css';
    
    /* Get Mattilsynet tokens as Tailwind config: */
    @import '@mattilsynet/design/tailwind.css';
    @import 'tailwindcss';
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```css
    /* Load @mattilsynet/design before Tailwind */
    @import url('@mattilsynet/design/styles.css');

    /**
    * Fix Tailwind Preflight specificity by using @layer:
    * See https://css-tricks.com/?p=372576
    */
    @layer tailwind-base {
      @tailwind base;
    }
    @tailwind components;
    @tailwind utilities;

    ```
  </Tabs.Panel>
</Tabs>

<div>
> ### ‚ö†Ô∏è Merk: `background`, `color` og `font` blir satt p√• `<body>`
>
> `body { background: ‚Ä¶; color: ‚Ä¶; font: ‚Ä¶ }` blir automatisk definert,
> slik at vi ivaretar [universell utforming](https://www.w3.org/WAI/WCAG21/Understanding/resize-text.html) og f√•r samme font og farge p√• tvers.
> Dette er lett √• overstyre ved behov: din CSS vil alltid ha f√∏rste prioritert - takket v√¶re teknikken [CSS @layer](https://developer.mozilla.org/en-US/docs/Web/CSS/@layer) üíõ
</div>

</Details>
<Details>
<Details.Summary><Badge data-badge="4" /> Ta i bruk stiler</Details.Summary>
<Prose>

- **St√∏rrelser kan endres** med `data-size="sm | md | lg | xl"` p√• *alle* HTML elementer
  - ...ogs√• p√• HTML elementer uten designsystem-klasse
- **Foretrekk √• endre CSS custom properties** fremfor rene properties;
  - f.eks.: `--mtds-button-border-color` istedenfor `border`
- **Klassenavn** hentes fra  `styles` objektet:

<Tabs data-size="sm">
  <Tabs.List>
    <Tabs.Tab>JSX</Tabs.Tab>
    <Tabs.Tab>JS</Tabs.Tab>
    <Tabs.Tab>JSON</Tabs.Tab>
  </Tabs.List>
  <Tabs.Panel>
    ```jsx
    import { styles } from "@mattilsynet/design";

    <button className={styles.button}></button>
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```jsx
    import { styles } from "@mattilsynet/design";

    <button class={styles.button}></button>
    ```
  </Tabs.Panel>
  <Tabs.Panel>
    ```jsx
    import styles from "@mattilsynet/design/styles.json";

    <button class={styles.button}></button>
    ```
  </Tabs.Panel>
</Tabs>

> ### Hvorfor ikke bare skrive `class="button"`?
>
> Det skal v√¶re trygt √• importere designsystemet i eksisterende prosjekt, eller bruke flere versjoner samtidig.
> Ved √• bruke [CSS-moduler](https://github.com/css-modules/css-modules) f√•r vi hashede klassenavn,
> som hindrer konflikt og gj√∏r at du slipper √• tenke p√• versjonering ü•≥

</Prose>
</Details>
<Details>
<Details.Summary><Badge data-badge="5" />Ta i bruk illustrasjoner og ikoner</Details.Summary>

- [Logo og favicon har egen dokumentasjon](?path=/docs/designsystem-logo--docs)
    - [Ikoner](https://github.com/phosphor-icons/homepage?tab=readme-ov-file#for-developers) kan importeres fra [PhosphorIcons](https://github.com/phosphor-icons/homepage?tab=readme-ov-file#for-developers) (se ogs√• [egen oppskrift for React SSR](https://github.com/phosphor-icons/react?tab=readme-ov-file#react-server-components-and-ssr))
    - [Mattilsynet-ikoner](?path=/docs/identitet-ikoner--docs) kan importeres fra `@mattilsynet/design/icons/*.svg`
    - [Illustasjoner](?path=/docs/identitet-illustrasjoner--docs) kan importeres fra `@mattilsynet/design/illustrations/*.svg`
    - **Bruker du Vite?** Hent SVG kilde ved bruk av [parameteret ?raw](https://vite.dev/guide/assets#importing-asset-as-string)
    - **Bruker du Vite+React?** Installer [vite-plugin-svgr](https://www.npmjs.com/package/vite-plugin-svgr) for √• importere SVG som komponenter:<br/>`import Fish from "@mattilsynet/design/illustrations/fish.svg?react";`

</Details>

<Divider data-gap="18" />

## For designere

Mattilsynet bruker Figma som designverkt√∏y. I Figma finner du komponenter, variabler og stiler fra Mattilsynet Designsystem som du kan bruke i produktet eller l√∏sningen du jobber med. Komponentene er tilpasset Mattilsynets identitet og behov og er i kontinuerlig utvikling. 

<Details>
<Details.Summary><Badge data-badge="1" /> Ta i bruk komponentene i Figma</Details.Summary>
<Prose>

- Du f√•r automatisk Mattilsynets designsystembibliotek n√•r du √•pner en fil i Figma. 
- Du finner biblioteket p√•  `‚ôªÔ∏è Mattilsynet/Design` under `Assets` i venstremenyen. 
- Du kan ogs√• trykke `Shift` + `I` for √• s√∏ke etter og sette inn komponenter.
- Du f√•r ogs√• tilgang til Phosphor icons - ikonbiblioteket vi bruker i Mattilsynet.
- De fleste komponentene kommer med ulike varianter og egenskaper som du kan justere i h√∏yremenyen. I Button kan du for eksempel aktivere ulike vekter, states og ikoner.

<div style={{ background: 'var(--mtds-color-background-tinted)' }}>
<img src={library} alt="Bibliotek i Figma" />
</div>
</Prose>
</Details>
<Details>
<Details.Summary><Badge data-badge="2" /> Bruk mode for √• justere st√∏rrelser og fargepalett</Details.Summary>
<Prose>

Alle komponenter og flater i designsystemet kan styres gjennom definerte modes. 
Modes kan styres p√• framens rotniv√•og overstyres p√• helt ned p√• komponentniv√•.
Modes finner du under `Apply variable mode` i Appearance-seksjonen i Figma sin h√∏yremeny:

<div style={{ background: 'var(--mtds-color-background-tinted)' }}>
<video controls style={{ display: 'block', width: '100%', height: 'auto' }}>
  <source src={modes} type="video/mp4" />
  Your browser does not support the video tag.
</video>
</div>

#### Size-mode
- P√•virker komponenter, size variabler og typografi.
- `Medium` er standard, mens `Large` brukes f.eks. p√• st√∏rre redaksjonelle flater.
- `Small` kan brukes i informasjonstette grensesnitt. 
- V√¶r oppmerksom p√• at komponentene er designet for √• harmonere innenfor en gitt size: Hvis du overstyrer st√∏rrelse p√• enkeltkomponenter, kan du risikere at de ikke passer sammen med helheten.

#### Color-mode
- Definerer fargepaletten som skal brukes.
- `Main` gir standard fargepalett, men du kan ogs√• benytte `Inverted` (for m√∏rk flate), `Success` (gr√∏nn), `Danger` (r√∏d), `Info` (bl√•), `Warning` (gul) og `Neutral` (gr√•toneskala).
- [L√¶r mer om farge-tokens og modes ‚Üí](?path=/docs/designsystem-tokens--docs)

#### Color scheme-mode
- Definerer lys eller m√∏rk modus.
<br />
</Prose>
</Details>
<Details>
<Details.Summary><Badge data-badge="3" /> Bruk variabler og typografistiler i egne design</Details.Summary>
<Prose>

Variabler og tekststiler er tilgjengelige i h√∏yremenyen n√•r du for eksempel trenger √• velge en farge, st√∏rrelse, avstand eller skygge.


#### Size-variabler
- Brukes til √• sette b√•de avstander og st√∏rrelser i og mellom komponenter.
- Size-mode p√•virker size variabler. Hvis du for eksempel bruker `size-4` i `medium mode` vil verdien v√¶re `16px`, mens den i `large mode` er `18px`.
- Ved √• bruke sizing-variabler istedenfor faste verdier blir det lettere √• tegne l√∏sninger for ulike skjermst√∏rrelser.

<div style={{ background: 'var(--mtds-color-background-tinted)' }}>
<img src={sizes} alt="St√∏rrelser i Figma" />
</div>

#### Fargevariabler

- Benytt fargene etter semantisk tiltenkt bruk: `background`, `surface`, `border`, `base`, `text`.
- Er du ute etter border-farger? S√∏k p√• `border`
- Er du ute etter en fill-farge p√• et element? S√∏k p√• `surface` eller `base`
- Er du ute etter en farge for tekst eller ikon? S√∏k p√• `text` eller `base-contrast`
- [L√¶r mer om farge-tokens og bruk ‚Üí](?path=/docs/designsystem-tokens--docs)

<div style={{ background: 'var(--mtds-color-background-tinted)' }}>
<img src={colors} alt="Farger i Figma" />
</div>

#### Typografistiler
- Overskrifter i Mattilsynet har overskrifter basert p√• t-skjortest√∏rrelser
- L√∏pende tekst benytter semantisk navngitte stiler
- St√∏rrelsen p√• alle typografisiler p√•virkes av `size mode`
- For all tekst b√∏r du bruke typografi-stiler eller typografi-komponenter, slik at du f√•r et konsistent uttrykk, riktig bruk avstander, st√∏rrelser og vekting.

<img src={typography} alt="Typografi i Figma" />

</Prose>
</Details>