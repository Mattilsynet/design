import { Meta, Canvas } from '@storybook/addon-docs/blocks';
import { JumpTo } from '../../.storybook/blocks';
import * as stories from './atlas.stories';
import { Popover } from '../react';


<Meta of={stories} />

# Atlas (Eksperimentell)

> Atlas er et standardisert oppsett for presentasjon av kart.

<JumpTo />
<Popover id="pop-jsref" style={{ maxWidth: 500 }}>For eksempel via `document.getElementById` eller via `useRef` i React.</Popover>

## Kode
- Bruk elementet `<mtds-atlas>` - også i React
- Importer `import "@mattilsynet/design/atlas"` eller<br/>`import { L } from "@mattilsynet/design/atlas"` ved behov for tilgang til [Leaflet](https://leafletjs.com/)
- **Karttegning** leveres av [Leaflet](https://leafletjs.com/) ([2.0.0@alpha.1](https://leafletjs.com/2025/05/18/leaflet-2.0.0-alpha.html)) i [EPSG:4326 koordinatsystem](https://epsg.io/4326)
- **Kartlag** leveres av [Kartverket](https://cache.kartverket.no/) for oppnå gjenkjennlige og presise norgeskart

## Utsnitt
- Bruk `data-view="lat, lng, zoom"` for å  kartutsnittet
- Bruk `data-view="fit"` for å få et utsnitt med alle markører
- Hent Atlas elementet via JS (f.eks `document.getElementById` eller `useRef` i React) og kall `atlasElement.setView([lat, lng, zoom])` eller `atlasElement.setView('fit')` for å endre utsnitt programatisk
<Canvas of={stories.WithView} />

## Kartlag
- Bruk `data-tiles="gray | color"` for å endre kartlag
<Canvas of={stories.WithColor} />

## Markører
- Hent Atlas elementet via JS (f.eks `document.getElementById` eller `useRef` i React)
- Legg til markører via `atlasElement.addMarker(latlng, options?)`
- Funksjonen returnerer [`L.Marker`](https://leafletjs.com/reference.html#marker) for videre manipulering ved behov
<Canvas of={stories.WithMarker} />

## Klikk-for-markør
- Bruk `data-cursor="pointer"` for å indikere at kartet er klikkbart
- Hent Atlas elementet via JS (f.eks `document.getElementById` eller `useRef` i React)
- Legg til `click` event via `atlasElement.map.on('click', (e) => { /* Your action here */ })`
<Canvas of={stories.WithClickToAddMarker} />

## Clustering
- Bruk `data-cluster="number"` for å aktivere clustring fra til et gitt zoom-nivå og utover
- Bruk `data-cluster="true"` dersom du har datapunker som kan stå på samme posisjon
<Canvas of={stories.WithClustering} />

## Popover
- Legg et Popover element med `id` inni `<mtds-atlas>` med ønsket innhold
- Bruk `marker.bindPopup('#ID-OF-POPUP')` for å binde sammen markør og popover
<Canvas of={stories.WithPopover} />

## Uten scroll-zoom
- Bruk `data-scroll-zoom="false"` for å deaktivere zooming med scroll-hjul
<Canvas of={stories.WithoutScrollZoom} />