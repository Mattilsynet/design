@layer mt.design {
	.button {
		composes: ds-button from "@digdir/designsystemet-css";

		align-self: center; /* If placed inside .flex */
		border-radius: calc(5 / 18 * 1em); /* 5px border-radius */
		display: inline-flex;
		font-weight: 500;
		transition-duration: .2s;
		transition-property: background-color, scale, translate;
		vertical-align: middle;

		/* Overwrite to same as tertiary from Designsystemet  */
		&:not([data-variant], [aria-current]:not([aria-current="false"])) {
			--dsc-button-background: transparent;
			--dsc-button-background--active: var(--ds-color-surface-active);
			--dsc-button-background--hover: var(--ds-color-surface-hover);
			--dsc-button-color: var(--ds-color-text-subtle);
			--dsc-button-color--hover: var(--ds-color-text-default);
		}

		& > svg {
			fill: currentColor;
			height: var(--mt-icon-size);
			width: var(--mt-icon-size);
		}

		&:disabled,
		&[aria-disabled] {
			pointer-events: none;
		}

		&:active {
			scale: 0.95;
		}

		/**
		 * Paint ellipsis when empty
		 */
		&:empty::before {
			background: currentcolor;
			content: "";
			mask: center / contain no-repeat var(--mt-icon-ellipsis);
			height: var(--mt-icon-size);
			width: var(--mt-icon-size);
		}

		/**
		 * Arrows and popover
		 */
		&[data-arrow]::before {
			background: currentcolor;
			content: "";
			mask: center / contain no-repeat var(--mt-icon-arrow);
			height: var(--mt-icon-size);
			order: 1; /* Use ::before and change order so ::after is allways unused, and loading will be placed where arrow was */
			width: var(--mt-icon-size);
		}
		&[data-arrow="left"]::before {
			order: -1;
			rotate: 180deg;
		}
		&[data-arrow][popovertarget]::before {
			mask-image: var(--mt-icon-chevron);
			rotate: 90deg;
			transition: rotate .2s ease-out;
		}
		&[data-arrow][popovertarget]:has(+ :popover-open)::before {
			rotate: -90deg;
		}

		/**
		 * Loading
		 */
		&[aria-busy="true"] {
			pointer-events: none;
			opacity: 1; /* Undo disabled styling */
		}
		&[aria-busy="true"]::before {
			background: currentcolor;
			content: "Laster...";
			display: inline-block;
			height: var(--mt-icon-size);
			mask: center / contain no-repeat
				url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cstyle%3E@keyframes rotate%7Bto%7Brotate:360deg%7D%7D@keyframes stroke%7B50%25%7Bstroke-dasharray:100,200;stroke-dashoffset:-15;transform:rotate(0deg)%7Dto%7Bstroke-dasharray:1,200;stroke-dashoffset:-120;transform:rotate(15deg)%7D%7Dcircle%7Bcx:25;cy:25;r:20;fill:none;stroke:currentcolor;stroke-width:5%7Dcircle:last-child%7Banimation:stroke ease-in-out infinite 2s,rotate linear infinite 2s;transform-origin:center%7D%3C/style%3E%3Ccircle opacity='.2'/%3E%3Ccircle stroke-dasharray='1, 200'/%3E%3C/svg%3E");
			text-align: center;
			vertical-align: middle;
			width: var(--mt-icon-size);
		}

		/**
		 * Aria-pressed
		 */
		&[aria-pressed="false"] [data-pressed="true"],
		&[aria-pressed="true"] [data-pressed="false"] {
			display: none;
		}

		/**
		 * Tooltip
		 */
		position: relative;
		&[data-tooltip]::after {
			background: color-mix(in hsl, transparent 10%, var(--mt-mork-granskog));
			border-radius: var(--ds-border-radius-md);
			color: var(--ds-color-accent-contrast-default);
			content: attr(data-tooltip);
			font-size: .9375rem;
			font-weight: 500;
			left: 50%;
			line-height: var(--ds-line-height-sm);
			max-width: 18em;
			opacity: 0;
			padding: var(--ds-size-1) var(--ds-size-2);
			pointer-events: none;
			position: absolute;
			top: 100%;
			transition: .15s;
			translate: -50%;
			visibility: hidden;
			width: max-content;
		}
		&[data-tooltip]:focus-visible::after,
		&[data-tooltip]:hover::after {
			opacity: 1;
			translate: -50% 2px;
			visibility: visible;
		}

		/**
		 * In <menu>
		 */
		menu > li > & {
			border-radius: var(--ds-border-radius-md);
			justify-content: start;
			width: 100%;
		}
	}
}
